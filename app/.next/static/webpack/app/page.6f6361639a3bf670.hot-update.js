"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/hooks/use-game-events.ts":
/*!**************************************!*\
  !*** ./src/hooks/use-game-events.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGameEvents: () => (/* binding */ useGameEvents)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tanstack/react-query */ \"(app-pages-browser)/./node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js\");\n/* harmony import */ var _lib_events_to_game_event__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/events/to-game-event */ \"(app-pages-browser)/./src/lib/events/to-game-event.ts\");\n/* harmony import */ var _lib_constants_routes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/constants/routes */ \"(app-pages-browser)/./src/lib/constants/routes.ts\");\n/* __next_internal_client_entry_do_not_use__ useGameEvents auto */ \n\n\n\nconst MAX_EVENTS = 200;\nconst MAX_RETRIES = 10;\nconst BASE_DELAY = 1000;\n/** All event types we listen for via named SSE events */ const EVENT_TYPES = [\n    \"GameUpdated\",\n    \"KeysPurchased\",\n    \"Claimed\",\n    \"ReferralEarned\",\n    \"ReferralClaimed\",\n    \"RoundStarted\",\n    \"RoundConcluded\",\n    \"ProtocolFeeCollected\"\n];\n/**\n * Central SSE subscription hook.\n *\n * Events are stored in chronological order (oldest first).\n * De-duplicated by event key (signature:index).\n * Returns { events, connected }.\n */ function useGameEvents() {\n    const [events, setEvents] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [connected, setConnected] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const retryCount = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);\n    const eventSourceRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const seenKeys = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Set());\n    const queryClient = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_3__.useQueryClient)();\n    const handleProgramEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGameEvents.useCallback[handleProgramEvent]\": (programEvent)=>{\n            // Update game state cache for GameUpdated events\n            if (programEvent.type === \"GameUpdated\") {\n                queryClient.setQueryData([\n                    \"gameState\"\n                ], {\n                    \"useGameEvents.useCallback[handleProgramEvent]\": (old)=>{\n                        if (!old) return old;\n                        const updatedGameState = {\n                            ...old.gameState,\n                            potLamports: programEvent.potLamports,\n                            totalKeys: programEvent.totalKeys,\n                            lastBuyer: programEvent.lastBuyer,\n                            timerEnd: programEvent.timerEnd,\n                            winnerPot: programEvent.winnerPot,\n                            nextRoundPot: programEvent.nextRoundPot\n                        };\n                        return {\n                            ...old,\n                            gameState: updatedGameState,\n                            keyPriceLamports: programEvent.nextKeyPrice,\n                            nextKeyPriceLamports: programEvent.nextKeyPrice\n                        };\n                    }\n                }[\"useGameEvents.useCallback[handleProgramEvent]\"]);\n            }\n            // Invalidate leaderboard and player state on buys/claims\n            if (programEvent.type === \"KeysPurchased\" || programEvent.type === \"Claimed\") {\n                queryClient.invalidateQueries({\n                    queryKey: [\n                        \"leaderboard\"\n                    ]\n                });\n                queryClient.invalidateQueries({\n                    queryKey: [\n                        \"playerState\"\n                    ]\n                });\n            }\n            // On round events, refetch game state entirely\n            if (programEvent.type === \"RoundStarted\" || programEvent.type === \"RoundConcluded\") {\n                queryClient.invalidateQueries({\n                    queryKey: [\n                        \"gameState\"\n                    ]\n                });\n            }\n            // Convert to feed event\n            const feedEvent = (0,_lib_events_to_game_event__WEBPACK_IMPORTED_MODULE_1__.toGameEvent)(programEvent);\n            if (!feedEvent) return;\n            // De-duplicate by key\n            if (seenKeys.current.has(feedEvent.id)) return;\n            seenKeys.current.add(feedEvent.id);\n            setEvents({\n                \"useGameEvents.useCallback[handleProgramEvent]\": (prev)=>{\n                    const next = [\n                        ...prev,\n                        feedEvent\n                    ];\n                    // Trim oldest events if over cap\n                    if (next.length > MAX_EVENTS) {\n                        const trimmed = next.slice(-MAX_EVENTS);\n                        // Rebuild seen keys from remaining events\n                        seenKeys.current = new Set(trimmed.map({\n                            \"useGameEvents.useCallback[handleProgramEvent]\": (e)=>e.id\n                        }[\"useGameEvents.useCallback[handleProgramEvent]\"]));\n                        return trimmed;\n                    }\n                    return next;\n                }\n            }[\"useGameEvents.useCallback[handleProgramEvent]\"]);\n        }\n    }[\"useGameEvents.useCallback[handleProgramEvent]\"], [\n        queryClient\n    ]);\n    const connect = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGameEvents.useCallback[connect]\": ()=>{\n            if (eventSourceRef.current) {\n                eventSourceRef.current.close();\n            }\n            const es = new EventSource(_lib_constants_routes__WEBPACK_IMPORTED_MODULE_2__.API_ROUTES.EVENTS);\n            eventSourceRef.current = es;\n            es.onopen = ({\n                \"useGameEvents.useCallback[connect]\": ()=>{\n                    setConnected(true);\n                    setError(false);\n                    retryCount.current = 0;\n                }\n            })[\"useGameEvents.useCallback[connect]\"];\n            // Listen for each named event type\n            for (const eventType of EVENT_TYPES){\n                es.addEventListener(eventType, {\n                    \"useGameEvents.useCallback[connect]\": (msg)=>{\n                        try {\n                            const data = JSON.parse(msg.data);\n                            handleProgramEvent(data);\n                        } catch (e) {\n                        // Ignore malformed events\n                        }\n                    }\n                }[\"useGameEvents.useCallback[connect]\"]);\n            }\n            es.onerror = ({\n                \"useGameEvents.useCallback[connect]\": ()=>{\n                    es.close();\n                    setConnected(false);\n                    if (retryCount.current < MAX_RETRIES) {\n                        const delay = BASE_DELAY * Math.pow(2, retryCount.current);\n                        retryCount.current++;\n                        setTimeout(connect, delay);\n                    }\n                }\n            })[\"useGameEvents.useCallback[connect]\"];\n        }\n    }[\"useGameEvents.useCallback[connect]\"], [\n        handleProgramEvent\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGameEvents.useEffect\": ()=>{\n            connect();\n            return ({\n                \"useGameEvents.useEffect\": ()=>{\n                    var _eventSourceRef_current;\n                    (_eventSourceRef_current = eventSourceRef.current) === null || _eventSourceRef_current === void 0 ? void 0 : _eventSourceRef_current.close();\n                }\n            })[\"useGameEvents.useEffect\"];\n        }\n    }[\"useGameEvents.useEffect\"], [\n        connect\n    ]);\n    return {\n        events,\n        connected\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2UtZ2FtZS1ldmVudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O21FQUVpRTtBQUNWO0FBSUU7QUFDTDtBQUVwRCxNQUFNTyxhQUFhO0FBQ25CLE1BQU1DLGNBQWM7QUFDcEIsTUFBTUMsYUFBYTtBQUVuQix1REFBdUQsR0FDdkQsTUFBTUMsY0FBa0M7SUFDdEM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNEO0FBRUQ7Ozs7OztDQU1DLEdBQ00sU0FBU0M7SUFDZCxNQUFNLENBQUNDLFFBQVFDLFVBQVUsR0FBR2IsK0NBQVFBLENBQWMsRUFBRTtJQUNwRCxNQUFNLENBQUNjLFdBQVdDLGFBQWEsR0FBR2YsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDZ0IsT0FBT0MsU0FBUyxHQUFHakIsK0NBQVFBLENBQUM7SUFDbkMsTUFBTWtCLGFBQWFoQiw2Q0FBTUEsQ0FBQztJQUMxQixNQUFNaUIsaUJBQWlCakIsNkNBQU1BLENBQXFCO0lBQ2xELE1BQU1rQixXQUFXbEIsNkNBQU1BLENBQUMsSUFBSW1CO0lBQzVCLE1BQU1DLGNBQWNsQixxRUFBY0E7SUFFbEMsTUFBTW1CLHFCQUFxQnBCLGtEQUFXQTt5REFDcEMsQ0FBQ3FCO1lBQ0MsaURBQWlEO1lBQ2pELElBQUlBLGFBQWFDLElBQUksS0FBSyxlQUFlO2dCQUN2Q0gsWUFBWUksWUFBWSxDQUN0QjtvQkFBQztpQkFBWTtxRUFDYixDQUFDQzt3QkFDQyxJQUFJLENBQUNBLEtBQUssT0FBT0E7d0JBQ2pCLE1BQU1DLG1CQUFtQjs0QkFDdkIsR0FBR0QsSUFBSUUsU0FBUzs0QkFDaEJDLGFBQWFOLGFBQWFNLFdBQVc7NEJBQ3JDQyxXQUFXUCxhQUFhTyxTQUFTOzRCQUNqQ0MsV0FBV1IsYUFBYVEsU0FBUzs0QkFDakNDLFVBQVVULGFBQWFTLFFBQVE7NEJBQy9CQyxXQUFXVixhQUFhVSxTQUFTOzRCQUNqQ0MsY0FBY1gsYUFBYVcs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QzdCIiwic291cmNlcyI6WyIvVXNlcnMvQ2lhbi9EZXNrdG9wL0ZPTW9sdDNEL2FwcC9zcmMvaG9va3MvdXNlLWdhbWUtZXZlbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VRdWVyeUNsaWVudCB9IGZyb20gXCJAdGFuc3RhY2svcmVhY3QtcXVlcnlcIjtcbmltcG9ydCB0eXBlIHsgR2FtZUV2ZW50IH0gZnJvbSBcIkAvdHlwZXMvZ2FtZVwiO1xuaW1wb3J0IHR5cGUgeyBHYW1lU3RhdGVSZXNwb25zZSB9IGZyb20gXCJAL3R5cGVzL2FwaVwiO1xuaW1wb3J0IHR5cGUgeyBQcm9ncmFtRXZlbnQsIFByb2dyYW1FdmVudFR5cGUgfSBmcm9tIFwiQC90eXBlcy9wcm9ncmFtLWV2ZW50c1wiO1xuaW1wb3J0IHsgdG9HYW1lRXZlbnQgfSBmcm9tIFwiQC9saWIvZXZlbnRzL3RvLWdhbWUtZXZlbnRcIjtcbmltcG9ydCB7IEFQSV9ST1VURVMgfSBmcm9tIFwiQC9saWIvY29uc3RhbnRzL3JvdXRlc1wiO1xuXG5jb25zdCBNQVhfRVZFTlRTID0gMjAwO1xuY29uc3QgTUFYX1JFVFJJRVMgPSAxMDtcbmNvbnN0IEJBU0VfREVMQVkgPSAxMDAwO1xuXG4vKiogQWxsIGV2ZW50IHR5cGVzIHdlIGxpc3RlbiBmb3IgdmlhIG5hbWVkIFNTRSBldmVudHMgKi9cbmNvbnN0IEVWRU5UX1RZUEVTOiBQcm9ncmFtRXZlbnRUeXBlW10gPSBbXG4gIFwiR2FtZVVwZGF0ZWRcIixcbiAgXCJLZXlzUHVyY2hhc2VkXCIsXG4gIFwiQ2xhaW1lZFwiLFxuICBcIlJlZmVycmFsRWFybmVkXCIsXG4gIFwiUmVmZXJyYWxDbGFpbWVkXCIsXG4gIFwiUm91bmRTdGFydGVkXCIsXG4gIFwiUm91bmRDb25jbHVkZWRcIixcbiAgXCJQcm90b2NvbEZlZUNvbGxlY3RlZFwiLFxuXTtcblxuLyoqXG4gKiBDZW50cmFsIFNTRSBzdWJzY3JpcHRpb24gaG9vay5cbiAqXG4gKiBFdmVudHMgYXJlIHN0b3JlZCBpbiBjaHJvbm9sb2dpY2FsIG9yZGVyIChvbGRlc3QgZmlyc3QpLlxuICogRGUtZHVwbGljYXRlZCBieSBldmVudCBrZXkgKHNpZ25hdHVyZTppbmRleCkuXG4gKiBSZXR1cm5zIHsgZXZlbnRzLCBjb25uZWN0ZWQgfS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUdhbWVFdmVudHMoKSB7XG4gIGNvbnN0IFtldmVudHMsIHNldEV2ZW50c10gPSB1c2VTdGF0ZTxHYW1lRXZlbnRbXT4oW10pO1xuICBjb25zdCBbY29ubmVjdGVkLCBzZXRDb25uZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgcmV0cnlDb3VudCA9IHVzZVJlZigwKTtcbiAgY29uc3QgZXZlbnRTb3VyY2VSZWYgPSB1c2VSZWY8RXZlbnRTb3VyY2UgfCBudWxsPihudWxsKTtcbiAgY29uc3Qgc2VlbktleXMgPSB1c2VSZWYobmV3IFNldDxzdHJpbmc+KCkpO1xuICBjb25zdCBxdWVyeUNsaWVudCA9IHVzZVF1ZXJ5Q2xpZW50KCk7XG5cbiAgY29uc3QgaGFuZGxlUHJvZ3JhbUV2ZW50ID0gdXNlQ2FsbGJhY2soXG4gICAgKHByb2dyYW1FdmVudDogUHJvZ3JhbUV2ZW50KSA9PiB7XG4gICAgICAvLyBVcGRhdGUgZ2FtZSBzdGF0ZSBjYWNoZSBmb3IgR2FtZVVwZGF0ZWQgZXZlbnRzXG4gICAgICBpZiAocHJvZ3JhbUV2ZW50LnR5cGUgPT09IFwiR2FtZVVwZGF0ZWRcIikge1xuICAgICAgICBxdWVyeUNsaWVudC5zZXRRdWVyeURhdGE8R2FtZVN0YXRlUmVzcG9uc2U+KFxuICAgICAgICAgIFtcImdhbWVTdGF0ZVwiXSxcbiAgICAgICAgICAob2xkKSA9PiB7XG4gICAgICAgICAgICBpZiAoIW9sZCkgcmV0dXJuIG9sZDtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRHYW1lU3RhdGUgPSB7XG4gICAgICAgICAgICAgIC4uLm9sZC5nYW1lU3RhdGUsXG4gICAgICAgICAgICAgIHBvdExhbXBvcnRzOiBwcm9ncmFtRXZlbnQucG90TGFtcG9ydHMsXG4gICAgICAgICAgICAgIHRvdGFsS2V5czogcHJvZ3JhbUV2ZW50LnRvdGFsS2V5cyxcbiAgICAgICAgICAgICAgbGFzdEJ1eWVyOiBwcm9ncmFtRXZlbnQubGFzdEJ1eWVyLFxuICAgICAgICAgICAgICB0aW1lckVuZDogcHJvZ3JhbUV2ZW50LnRpbWVyRW5kLFxuICAgICAgICAgICAgICB3aW5uZXJQb3Q6IHByb2dyYW1FdmVudC53aW5uZXJQb3QsXG4gICAgICAgICAgICAgIG5leHRSb3VuZFBvdDogcHJvZ3JhbUV2ZW50Lm5leHRSb3VuZFBvdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5vbGQsXG4gICAgICAgICAgICAgIGdhbWVTdGF0ZTogdXBkYXRlZEdhbWVTdGF0ZSxcbiAgICAgICAgICAgICAga2V5UHJpY2VMYW1wb3J0czogcHJvZ3JhbUV2ZW50Lm5leHRLZXlQcmljZSxcbiAgICAgICAgICAgICAgbmV4dEtleVByaWNlTGFtcG9ydHM6IHByb2dyYW1FdmVudC5uZXh0S2V5UHJpY2UsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gSW52YWxpZGF0ZSBsZWFkZXJib2FyZCBhbmQgcGxheWVyIHN0YXRlIG9uIGJ1eXMvY2xhaW1zXG4gICAgICBpZiAoXG4gICAgICAgIHByb2dyYW1FdmVudC50eXBlID09PSBcIktleXNQdXJjaGFzZWRcIiB8fFxuICAgICAgICBwcm9ncmFtRXZlbnQudHlwZSA9PT0gXCJDbGFpbWVkXCJcbiAgICAgICkge1xuICAgICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbXCJsZWFkZXJib2FyZFwiXSB9KTtcbiAgICAgICAgcXVlcnlDbGllbnQuaW52YWxpZGF0ZVF1ZXJpZXMoeyBxdWVyeUtleTogW1wicGxheWVyU3RhdGVcIl0gfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE9uIHJvdW5kIGV2ZW50cywgcmVmZXRjaCBnYW1lIHN0YXRlIGVudGlyZWx5XG4gICAgICBpZiAoXG4gICAgICAgIHByb2dyYW1FdmVudC50eXBlID09PSBcIlJvdW5kU3RhcnRlZFwiIHx8XG4gICAgICAgIHByb2dyYW1FdmVudC50eXBlID09PSBcIlJvdW5kQ29uY2x1ZGVkXCJcbiAgICAgICkge1xuICAgICAgICBxdWVyeUNsaWVudC5pbnZhbGlkYXRlUXVlcmllcyh7IHF1ZXJ5S2V5OiBbXCJnYW1lU3RhdGVcIl0gfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgdG8gZmVlZCBldmVudFxuICAgICAgY29uc3QgZmVlZEV2ZW50ID0gdG9HYW1lRXZlbnQocHJvZ3JhbUV2ZW50KTtcbiAgICAgIGlmICghZmVlZEV2ZW50KSByZXR1cm47XG5cbiAgICAgIC8vIERlLWR1cGxpY2F0ZSBieSBrZXlcbiAgICAgIGlmIChzZWVuS2V5cy5jdXJyZW50LmhhcyhmZWVkRXZlbnQuaWQpKSByZXR1cm47XG4gICAgICBzZWVuS2V5cy5jdXJyZW50LmFkZChmZWVkRXZlbnQuaWQpO1xuXG4gICAgICBzZXRFdmVudHMoKHByZXYpID0+IHtcbiAgICAgICAgY29uc3QgbmV4dCA9IFsuLi5wcmV2LCBmZWVkRXZlbnRdO1xuICAgICAgICAvLyBUcmltIG9sZGVzdCBldmVudHMgaWYgb3ZlciBjYXBcbiAgICAgICAgaWYgKG5leHQubGVuZ3RoID4gTUFYX0VWRU5UUykge1xuICAgICAgICAgIGNvbnN0IHRyaW1tZWQgPSBuZXh0LnNsaWNlKC1NQVhfRVZFTlRTKTtcbiAgICAgICAgICAvLyBSZWJ1aWxkIHNlZW4ga2V5cyBmcm9tIHJlbWFpbmluZyBldmVudHNcbiAgICAgICAgICBzZWVuS2V5cy5jdXJyZW50ID0gbmV3IFNldCh0cmltbWVkLm1hcCgoZSkgPT4gZS5pZCkpO1xuICAgICAgICAgIHJldHVybiB0cmltbWVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbcXVlcnlDbGllbnRdXG4gICk7XG5cbiAgY29uc3QgY29ubmVjdCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoZXZlbnRTb3VyY2VSZWYuY3VycmVudCkge1xuICAgICAgZXZlbnRTb3VyY2VSZWYuY3VycmVudC5jbG9zZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGVzID0gbmV3IEV2ZW50U291cmNlKEFQSV9ST1VURVMuRVZFTlRTKTtcbiAgICBldmVudFNvdXJjZVJlZi5jdXJyZW50ID0gZXM7XG5cbiAgICBlcy5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICBzZXRDb25uZWN0ZWQodHJ1ZSk7XG4gICAgICBzZXRFcnJvcihmYWxzZSk7XG4gICAgICByZXRyeUNvdW50LmN1cnJlbnQgPSAwO1xuICAgIH07XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGVhY2ggbmFtZWQgZXZlbnQgdHlwZVxuICAgIGZvciAoY29uc3QgZXZlbnRUeXBlIG9mIEVWRU5UX1RZUEVTKSB7XG4gICAgICBlcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgKG1zZzogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobXNnLmRhdGEpIGFzIFByb2dyYW1FdmVudDtcbiAgICAgICAgICBoYW5kbGVQcm9ncmFtRXZlbnQoZGF0YSk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIElnbm9yZSBtYWxmb3JtZWQgZXZlbnRzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGVzLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICBlcy5jbG9zZSgpO1xuICAgICAgc2V0Q29ubmVjdGVkKGZhbHNlKTtcblxuICAgICAgaWYgKHJldHJ5Q291bnQuY3VycmVudCA8IE1BWF9SRVRSSUVTKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gQkFTRV9ERUxBWSAqIE1hdGgucG93KDIsIHJldHJ5Q291bnQuY3VycmVudCk7XG4gICAgICAgIHJldHJ5Q291bnQuY3VycmVudCsrO1xuICAgICAgICBzZXRUaW1lb3V0KGNvbm5lY3QsIGRlbGF5KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbaGFuZGxlUHJvZ3JhbUV2ZW50XSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25uZWN0KCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGV2ZW50U291cmNlUmVmLmN1cnJlbnQ/LmNsb3NlKCk7XG4gICAgfTtcbiAgfSwgW2Nvbm5lY3RdKTtcblxuICByZXR1cm4geyBldmVudHMsIGNvbm5lY3RlZCB9O1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJ1c2VRdWVyeUNsaWVudCIsInRvR2FtZUV2ZW50IiwiQVBJX1JPVVRFUyIsIk1BWF9FVkVOVFMiLCJNQVhfUkVUUklFUyIsIkJBU0VfREVMQVkiLCJFVkVOVF9UWVBFUyIsInVzZUdhbWVFdmVudHMiLCJldmVudHMiLCJzZXRFdmVudHMiLCJjb25uZWN0ZWQiLCJzZXRDb25uZWN0ZWQiLCJlcnJvciIsInNldEVycm9yIiwicmV0cnlDb3VudCIsImV2ZW50U291cmNlUmVmIiwic2VlbktleXMiLCJTZXQiLCJxdWVyeUNsaWVudCIsImhhbmRsZVByb2dyYW1FdmVudCIsInByb2dyYW1FdmVudCIsInR5cGUiLCJzZXRRdWVyeURhdGEiLCJvbGQiLCJ1cGRhdGVkR2FtZVN0YXRlIiwiZ2FtZVN0YXRlIiwicG90TGFtcG9ydHMiLCJ0b3RhbEtleXMiLCJsYXN0QnV5ZXIiLCJ0aW1lckVuZCIsIndpbm5lclBvdCIsIm5leHRSb3VuZFBvdCIsImtleVByaWNlTGFtcG9ydHMiLCJuZXh0S2V5UHJpY2UiLCJuZXh0S2V5UHJpY2VMYW1wb3J0cyIsImludmFsaWRhdGVRdWVyaWVzIiwicXVlcnlLZXkiLCJmZWVkRXZlbnQiLCJjdXJyZW50IiwiaGFzIiwiaWQiLCJhZGQiLCJwcmV2IiwibmV4dCIsImxlbmd0aCIsInRyaW1tZWQiLCJzbGljZSIsIm1hcCIsImUiLCJjb25uZWN0IiwiY2xvc2UiLCJlcyIsIkV2ZW50U291cmNlIiwiRVZFTlRTIiwib25vcGVuIiwiZXZlbnRUeXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1zZyIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJvbmVycm9yIiwiZGVsYXkiLCJNYXRoIiwicG93Iiwic2V0VGltZW91dCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/use-game-events.ts\n"));

/***/ })

});